---
id: TM-007
title: Org Peer Visibility Settings APIs
status: todo
labels: [api]
deps: [TM-002]
inputs:
  - design/Trusted Managers Mechanism.md
outputs: []
timebox: "2h"
---

## Summary
Add two endpoints: group-level toggle for organizational peer visibility and per-user opt-out within an Organization group.

## Acceptance Criteria (measurable)
- [ ] POST /api/groups/{id}/settings/org-peer-visibility updates group-level flag (admin only).
- [ ] POST /api/groups/{id}/members/{userId}/org-peer-visibility-access updates personal opt-out (self only).
- [ ] Authorization enforced; returns 200 and persists flags.

## Steps
- [ ] Read inputs
- [ ] Implement endpoints and validation
- [ ] Persist flags on Group/GroupMember
- [ ] Add basic tests for auth boundaries
- [ ] Update spec/index.yml

## Verification
- curl -X POST /api/groups/{id}/settings/org-peer-visibility -d '{"enabled":true}'
- curl -X POST /api/groups/{id}/members/{userId}/org-peer-visibility-access -d '{"disabled":true}'

## Notes
Only applicable for Type=Organisation groups.

