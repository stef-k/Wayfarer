---
id: TM-004
title: API - Invitations
status: doing
labels: [api, backend]
deps: [TM-002]
inputs:
  - design/Trusted Managers Mechanism.md
outputs: []
timebox: "2h"
---

## Summary
Implement API for listing, creating, and acting on invitations (accept/decline) for both managers and users per design.

## Acceptance Criteria (measurable)
- [ ] List pending invitations for current user returns correct data.
- [ ] Accept/decline updates invitation status and membership accordingly.
- [ ] All actions enforce membership/admin rules and return correct status codes.

## Steps
- [ ] Read inputs
- [ ] Add controller actions and DTOs
- [ ] Wire to invitation service methods
- [ ] Add basic integration tests (happy + sad paths)
- [ ] Update spec/index.yml

## Verification
- curl /api/invitations (auth as user/manager) returns pending list
- curl -X POST /api/invitations/{id}/accept returns 200 and adds member
- curl -X POST /api/invitations/{id}/decline returns 200 and marks declined

## Notes
Respect auditing for invite/accept/decline via BaseController.LogAudit.

