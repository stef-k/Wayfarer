---
id: T-008
title: Location query caps & pagination
status: done
labels: [backend, performance]
deps: [T-005]
owner: ""
inputs:
  - design/MobileGroups.md
outputs: []
timebox: "2h"
---

## Summary
Add pagination and/or hard caps to group location queries to keep mobile responses performant, documenting defaults for clients.

## Acceptance Criteria (measurable)
- [x] `GroupLocationsQueryRequest` (and responses) support pagination or expose documented max limits with clear truncation indicators.
- [x] Server enforces configured caps for multi-user or large viewport queries and responds within target latency.
- [x] Tests cover large result sets confirming caps/pagination behave as specified.

## Steps
- [x] Read inputs
- [x] Implement pagination/cap logic in service/controller
- [x] Add/adjust tests for large datasets
- [x] Run verification
- [x] Update spec/index.yml (status, deps if changed)

## Verification
- `dotnet test --filter MobileGroupLocationsPagination`
- `curl -H "Authorization: Bearer <token>" http://localhost:5000/api/mobile/groups/<id>/locations/query -d '{...}`

## Notes
Expose configuration via appsettings; ensure responses note truncation or provide `nextPageToken` when applicable.
