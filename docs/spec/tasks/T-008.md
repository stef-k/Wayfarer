---
id: T-008
title: Location query caps & pagination
status: todo
labels: [backend, performance]
deps: [T-005]
owner: ""
inputs:
  - design/MobileGroups.md
outputs: []
timebox: "2h"
---

## Summary
Add pagination and/or hard caps to group location queries to keep mobile responses performant, documenting defaults for clients.

## Acceptance Criteria (measurable)
- [ ] `GroupLocationsQueryRequest` (and responses) support pagination or expose documented max limits with clear truncation indicators.
- [ ] Server enforces configured caps for multi-user or large viewport queries and responds within target latency.
- [ ] Tests cover large result sets confirming caps/pagination behave as specified.

## Steps
- [ ] Read inputs
- [ ] Implement pagination/cap logic in service/controller
- [ ] Add/adjust tests for large datasets
- [ ] Run verification
- [ ] Update spec/index.yml (status, deps if changed)

## Verification
- `dotnet test --filter MobileGroupLocationsPagination`
- `curl -H "Authorization: Bearer <token>" http://localhost:5000/api/mobile/groups/<id>/locations/query -d '{...}`

## Notes
Expose configuration via appsettings; ensure responses note truncation or provide `nextPageToken` when applicable.