---
id: TM-015
title: User UI – Family/Friends Groups
status: todo
labels: [ui]
deps: [TM-003, TM-004, TM-005, TM-006]
inputs:
  - design/Trusted Managers Mechanism.md
outputs: []
timebox: "2h"
---

## Summary
Provide a User-area workflow mirroring the Manager group handling, but limited to non‑corporate usage. Users can create and manage Family or Friends groups (Organization type is not available), invite/remove members, and use the existing map and roster patterns. Reuse current APIs/services and UI patterns; enforce restrictions both in UI and server guards.

## Acceptance Criteria (measurable)
- [ ] User can create a new group of type Family or Friends in the User area; Organization is not presented in UI and creation of Organization is rejected on server for role User.
- [ ] User can invite members to their Family/Friends group; pending/accepted statuses reflect in roster without full reload.
- [ ] User can remove members where allowed (never remove owner; Organization‑specific manager safeguards are irrelevant for Family/Friends).
- [ ] New groups appear under User/Groups list; map view works with existing Latest/Query endpoints and SSE.
- [ ] Server‑side authorization and validation prevent role User from creating Organization groups.
- [ ] Focused tests cover: successful creation for Family/Friends, rejection for Organization, basic invite/remove flow.

## Steps
- [ ] Read inputs
- [ ] Add User Create/Members views + JS (mirror Manager variants)
- [ ] Hide Organization in User UI and add server guard for role User
- [ ] Wire to existing groups and invitations APIs
- [ ] Add unit/integration tests (User‑scoped creation + invites)
- [ ] Update spec/index.yml

## Verification
- dotnet run → /User/Groups → "New Group": create Family/Friends; verify listed and map loads
- Invite a user from User area; accept/decline from invitee account; roster updates
- dotnet test --filter "FullyQualifiedName~UserGroupsFamilyFriends"

## Notes
Scope explicitly excludes corporate/Organization creation in User area. Reuse Manager implementations with minimal targeted variations for the User flow.

