---
id: TM-001
title: Data Model and Migration
status: done
labels: [db, backend]
deps: []
inputs:
  - design/Trusted Managers Mechanism.md
outputs: []
timebox: "2h"
---

## Summary
Define Group, GroupMember, and GroupInvitation entities per the design and add the initial EF Core migration to create tables, keys, and constraints in PostgreSQL.

## Acceptance Criteria (measurable)
- [x] Entity classes exist with all fields listed in the design (including flags and enums/strings).
- [x] EF migration (e.g., TrustedManagers_Initial) creates three tables with indices/FKs.
- [x] Applying the migration on a dev database succeeds without errors.

## Steps
- [x] Read inputs
- [x] Add entity classes and DbContext mappings
- [x] Create and inspect EF migration
- [x] Update database (dev)
- [x] Update spec/index.yml (status, deps if changed)

## Verification
- dotnet ef migrations add TrustedManagers_Initial
- dotnet ef database update
- psql -c "\\dt *group*" and psql -c "\\d+ \"GroupMember\"" show expected columns/constraints

## Notes
Use PostgreSQL conventions; reuse existing DbContext patterns.
