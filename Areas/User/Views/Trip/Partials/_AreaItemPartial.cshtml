@using NetTopologySuite.IO
@model Wayfarer.Models.Area

@{
    var geomJson = Model.Geometry != null
        ? new GeoJsonWriter().Write(Model.Geometry)
        : "null";
}

<li class="area-list-item list-group-item d-flex align-items-center"
    data-area-id="@Model.Id"
    data-area-geom='@Html.Raw(geomJson)'
    data-area-fill="@Model.FillHex"
    data-area-name="@Model.Name"
    data-area-notes="@(Model.Notes ?? "")">
    <i class="bi bi-grip-vertical drag-handle me-1"></i>

    <span class="area-name flex-grow-1">
        @await Html.PartialAsync("~/Areas/User/Views/Trip/Partials/_CircleIcon.cshtml",
            ("flag", "bg-green"))
        @Model.Name
    </span>

    <div class="btn-group btn-group-sm ms-auto">
        <button type="button"
                class="btn btn-outline-primary btn-edit-area"
                data-area-id="@Model.Id"
                title="Edit Area">
            <i class="bi bi-pencil"></i>
        </button>
        <button type="button"
                class="btn btn-outline-danger btn-delete-area"
                data-area-id="@Model.Id"
                title="Delete Area">
            <i class="bi bi-trash"></i>
        </button>
    </div>
</li>