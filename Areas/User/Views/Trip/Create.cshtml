@model Wayfarer.Models.Trip

@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    ViewData["Title"] = ViewData["Title"] ?? "New Trip";
}

<h2>@ViewData["Title"]</h2>

<form asp-area="User" asp-controller="Trip" asp-action="Create" method="post">
    @Html.AntiForgeryToken()

    <!-- Show both model-level and field-level errors -->
    <div asp-validation-summary="All" class="text-danger mb-3"></div>

    <div class="form-group">
        <label asp-for="Name" class="control-label"></label>
        <input asp-for="Name" class="form-control"/>
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>

    <div class="form-row">
        <div class="form-group col-md-6">
            <label asp-for="StartDate" class="control-label"></label>
            <input asp-for="StartDate" class="form-control" type="date"/>
            <span asp-validation-for="StartDate" class="text-danger"></span>
        </div>
        <div class="form-group col-md-6">
            <label asp-for="EndDate" class="control-label"></label>
            <input asp-for="EndDate" class="form-control" type="date"/>
            <span asp-validation-for="EndDate" class="text-danger"></span>
        </div>
    </div>

    <div class="form-group">
        <label asp-for="Days" class="control-label"></label>
        <input asp-for="Days" class="form-control"/>
        <small class="form-text text-muted">
            Override total days (auto-calculated from regions & segments).
        </small>
        <span asp-validation-for="Days" class="text-danger"></span>
    </div>

    <div class="form-group form-check">
        <input asp-for="IsPublic" class="form-check-input"/>
        <label asp-for="IsPublic" class="form-check-label"></label>
    </div>

    <div class="form-group">
        <label asp-for="NotesHtml" class="control-label">Notes (HTML):</label>
        <textarea asp-for="NotesHtml" class="form-control" rows="5"></textarea>
        <span asp-validation-for="NotesHtml" class="text-danger"></span>
    </div>

    <div class="form-group mt-3">
        <!-- Regular Create -->
        <button
            type="submit"
            name="submitAction"
            value="save"
            class="btn btn-primary">
            Create
        </button>

        <!-- Create and immediately go to Edit -->
        <button
            type="submit"
            name="submitAction"
            value="save-edit"
            class="btn btn-outline-primary">
            Create &amp; Edit
        </button>

        <a asp-area="User" asp-controller="Trip" asp-action="Index" class="btn btn-secondary">
            Cancel
        </a>
    </div>

</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial"/>
}
